# Maintainer: Paul Davis <paul@dangersalad.com>
pkgname=dangersalad-plasma
pkgver=0.1.2
pkgrel=1
provides=('dangersalad-desktop')
conflicts=('dangersalad-i3' 'dangersalad-exwm' 'dangersalad-gnome')
pkgdesc="KDE Plasma and personal desktop configuration for dangersalad systems"
arch=('any')
url="https://github.com/dangersalad/arch/tree/master/pkg"
license=('MIT')
install="dangersalad-plasma.install"
makedepends=(git)
source=(
    dangersalad-plasma.install
    default.pa
    gpg-agent.conf 
)
sha256sums=('8a3dbed67f44f819b91c3a80db62e2ba0566e7868191f4e427a86f597bbe46da'
            '45f31e9d13e87def9317e9e12c57c61f582d0c92a3391551842343eb7224be49'
            '89af270caed8c2e758a4fe3e41929aa4be9cc010114615ac77622ab9a2f2145c')

depends=(

    # graphical meta package
    dangersalad-graphical

    acpi
    bluez
    bluez-utils
    pulseaudio-bluetooth

    bluedevil
    breeze
    breeze-gtk
    discover
    drkonqi
    kactivitymanagerd
    kde-cli-tools
    kde-gtk-config
    kdecoration
    kdeplasma-addons
    kgamma5
    khotkeys
    kinfocenter
    kmenuedit
    knetattach
    kscreen
    kscreenlocker
    ksshaskpass
    ksysguard
    kuiserver
    kwallet-pam
    kwayland-integration
    kwin
    kwrited
    libkscreen
    libksysguard
    milou
    oxygen
    plasma-desktop
    plasma-integration
    plasma-nm
    plasma-pa
    plasma-sdk
    plasma-vault
    plasma-workspace
    plasma-workspace-wallpapers
    polkit-kde-agent
    powerdevil
    sddm-kcm
    systemsettings
    user-manager
    xdg-desktop-portal-kde
)

package () {
    
    install -Dm 0644 gpg-agent.conf "$pkgdir/etc/skel/.gnupg/gpg-agent.conf"
    chmod 700 "$pkgdir/etc/skel/.gnupg"
    
    install -Dm 0644 default.pa "$pkgdir/etc/pulse/default.pa.ds"

    # install exwm branch of emacs config
    git clone --recursive --branch exwm https://github.com/dangersalad/emacs-config "$pkgdir/etc/skel/.emacs.d"

    mkdir -p "$pkgdir/etc/skel/org/agenda"
    mkdir -p "$pkgdir/etc/skel/sync"
    
}
